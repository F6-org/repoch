{"version":3,"sources":["../../src/date-picker/index.js"],"names":["formatNumber","n","DatePicker","handleRange","ranges","props","dateRange","split","start","Date","end","date","getTime","year","getFullYear","getDays","max","days","i","val","push","text","value","getDaysByMonthAndYear","month","int_d","parseInt","d","getDate","initMonthes","initYears","arr","initHours","initMinutes","initDate","that","dateArr","years","months","map","y","m","day","cur","initial","_date","dateFormat","obj","forEach","key","idx","selectData","handleGetData","father","select","onSelect","res","Object","keys","selectStyle","onMaskClick","React","Component","propTypes","PropTypes","string","func","show","bool","selectStyleyle","array","defaultProps"],"mappings":"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","file":"index.js","sourcesContent":["/**\n *  date: string，初始时间\n *  dateRange:  string，日期范围，默认1970-01-01~2050-01-01\n *  dateFormat: string, 'yyyy.MM.dd.hh.mm' 或 'yyyy-MM-dd.hh.mm',用点区分列\n *  onSelect: func, 选择时间回调\n *  show:bool, 展示 or 隐藏组件\n *  onMaskClick: func, 点击蒙层\n *  selectStyleyle: array 滚轮选择器li容器样式\n */\n\nimport ScrollSelect from '@repoch/select';\nimport date from '@repoch/format/date';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nfunction formatNumber(n) {\n    return n < 10 ? \"0\" + n : \"\" + n;\n}\n\nexport default class DatePicker extends React.Component {\n    static propTypes = {\n        date: PropTypes.string,\n        dateRange:  PropTypes.string,//日期范围\n        dateFormat: PropTypes.string, // 格式，格式多样一些，可以写成更语义的，\n        onSelect: PropTypes.func, // 选择时间回调\n        show: PropTypes.bool, // 展示 or 隐藏组件\n        onMaskClick: PropTypes.func, // 点击蒙层\n        selectStyleyle: PropTypes.array //滚轮选择器li容器样式\n    }\n\n    static defaultProps = {\n        date: '',\n        dateFormat: 'yyyy.MM.dd.hh.mm',\n        dateRange: '1970-01-01~2050-01-01',\n        onSelect: function() {},\n        onMaskClick: function() {}\n    };\n\n    handleRange = () => {\n        let ranges = this.props.dateRange.split('~');\n        let start = new Date(ranges[0]);\n        let end = new Date(ranges[1]);\n        \n        return {\n            start: {\n                date: start.getTime(),\n                year: start.getFullYear()\n            },\n            end: {\n                date: end.getTime(),\n                year: end.getFullYear()\n            }\n        };\n    }\n\n    getDays = function(max) {\n        var days = [];\n        for(var i=1; i<= (max||31);i++) {\n            let val = formatNumber(i);\n            days.push({ text: val, value: val });\n        }\n        return days;\n    }\n\n    getDaysByMonthAndYear = function(month, year) {\n        var int_d = new Date(year, parseInt(month)+1-1, 1);\n        var d = new Date(int_d - 1);\n        return this.getDays(d.getDate());\n    }\n\n    initMonthes = [\n        {text: '01', value: '01'},\n        {text: '02', value: '02'},\n        {text: '03', value: '03'},\n        {text: '04', value: '04'},\n        {text: '05', value: '05'},\n        {text: '06', value: '06'},\n        {text: '07', value: '07'},\n        {text: '08', value: '08'},\n        {text: '09', value: '09'},\n        {text: '10', value: '10'},\n        {text: '11', value: '11'},\n        {text: '12', value: '12'}\n    ]\n\n    initYears = () => {\n        var arr = [];\n        let { start, end } = this.handleRange();\n        for (var i = start.year; i <= end.year; i++) { \n            let year = i + '';\n            arr.push({text: year, value: year}); \n        }\n        return arr;\n    }\n\n    initHours = (function () {\n        var arr = [];\n        for (var i = 0; i <= 23; i++) {\n            let val = formatNumber(i);\n            arr.push({text: val, value: val}); \n        }\n        return arr;\n    })()\n\n    initMinutes = (function () {\n        var arr = [];\n        for (var i = 0; i <= 59; i++) { \n            let val = formatNumber(i);\n            arr.push({text: val, value: val}); \n        }\n        return arr;\n    })()\n\n    initDate = () => {\n        let that = this;\n        let dateArr = [];\n        let {start, end} = this.handleRange();\n        let years = this.initYears();\n        let months = this.initMonthes;\n\n        years.map((year, y) => {\n            months.map((month, m)=> {\n                let days = that.getDaysByMonthAndYear(month.value, year.value);\n                days.map((day, d)=> {\n                    let value = `${year.value}-${month.value}-${day.value}`;\n                    let cur = new Date(value).getTime();\n                    if (cur < start.date || cur > end.date) return;\n                    dateArr.push({\n                        text: `${year.value}年${month.value}月${day.value}日`, \n                        value: value\n                    });\n                });\n            });\n        });\n        return dateArr;\n    }\n\n    initial = () => {\n        let _date = this.props.date ? new Date(this.props.date) : new Date();\n        let val = date(this.props.dateFormat, _date).split('.');\n        let obj = {};\n        this.props.dateFormat.split('.').forEach((key, idx) => {\n            obj[key] = val[idx];\n        });\n        return obj;\n    }\n\n    selectData = () => {\n        let selectData = {};\n        this.props.dateFormat.split(\".\").forEach((key, idx) => {\n            selectData[key] = {};\n        });\n        return selectData;//{yyyy: {}, MM,: {},dd: {}, hh: {}, mm: {}}或{yyyy-MM-dd:{},hh:{},mm: {}}\n    }\n\n    handleGetData = (key, father, select) => {\n        let years = this.initYears();\n        switch(key) {\n            case 'yyyy':\n                return years;\n            case 'MM':\n                return this.initMonthes;\n            case 'dd':\n                return this.getDaysByMonthAndYear(father, years[select[0]].value);\n            case 'hh':\n                return this.initHours;\n            case 'mm':\n                return this.initMinutes;\n            case 'yyyy-MM-dd':\n                return this.initDate();\n        }\n    }\n\n    onSelect = (res) => {\n        let date = \"\";\n        Object.keys(res).forEach((key, i) => {\n            let value = res[key].value;\n            switch(key) {\n                case 'yyyy':\n                case 'MM':\n                    date = date + value + \"-\";\n                    break;\n\n                case 'dd':\n                    date = date + value + \" \";\n                    break;\n\n                case 'hh':\n                    date = date + value + \":\";\n                    break;\n\n                case 'mm':\n                    date += value;\n                    break;\n\n                case 'yyyy-MM-dd':\n                    date = date + value + \" \";\n                    break;\n            }\n        });\n        this.props.onSelect(date);\n    }\n\n    render() {\n        return (\n            <ScrollSelect { ...this.props } \n                initial={ this.initial() }\n                selectData={ this.selectData() }\n                onGetSelectorData={ this.handleGetData }\n                onSelect={ this.onSelect }\n                selectSt={ this.props.selectStyle }\n                onMaskClick={ this.props.onMaskClick }\n            />\n        );\n    }\n}\n"]}