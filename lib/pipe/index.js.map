{"version":3,"sources":["../../src/pipe/index.js"],"names":["getContainer","container","defaultContainer","ReactDOM","findDOMNode","Pipe","_renderOverlay","_unrenderOverlay","_unmountOverlayTarget","_overlayTarget","document","createElement","getContainerDOMNode","appendChild","removeChild","overlay","props","children","React","Children","only","_mountOverlayTarget","_overlayInstance","unstable_renderSubtreeIntoContainer","unmountComponentAtNode","isMounted","Error","getWrappedDOMNode","body","Component","propTypes","PropTypes","oneOfType","node","func","element","any","displayName"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,SAASA,YAAT,CAAsBC,SAAtB,EAAiCC,gBAAjC,EAAmD;AAC/CD,gBAAY,OAAOA,SAAP,KAAqB,UAArB,GAAkCA,WAAlC,GAAgDA,SAA5D;AACA,WAAOE,mBAASC,WAAT,CAAqBH,SAArB,KAAmCC,gBAA1C;AACH;;IAEoBG,I;;;;;;;;;;;4CAWG;AAChB,iBAAKC,cAAL;AACH;;;6CAEoB;AACjB,iBAAKA,cAAL;AACH;;;+CAEsB;AACnB,iBAAKC,gBAAL;AACA,iBAAKC,qBAAL;AACH;;;iCAEQ;AACL,mBAAO,IAAP;AACH;;;8CAEqB;AAClB,gBAAI,CAAC,KAAKC,cAAV,EAA0B;AACtB,qBAAKA,cAAL,GAAsBC,SAASC,aAAT,CAAuB,KAAvB,CAAtB;AACA,qBAAKC,mBAAL,GACKC,WADL,CACiB,KAAKJ,cADtB;AAEH;AACJ;;;gDAEuB;AACpB,gBAAI,KAAKA,cAAT,EAAyB;AACrB,qBAAKG,mBAAL,GACKE,WADL,CACiB,KAAKL,cADtB;AAEA,qBAAKA,cAAL,GAAsB,IAAtB;AACH;AACJ;;;yCAEgB;AACb,gBAAIM,UAAU,CAAC,KAAKC,KAAL,CAAWC,QAAZ,GAAuB,IAAvB,GAA8BC,gBAAMC,QAAN,CAAeC,IAAf,CAAoB,KAAKJ,KAAL,CAAWC,QAA/B,CAA5C;;AAEA;AACA,gBAAIF,YAAY,IAAhB,EAAsB;AAClB,qBAAKM,mBAAL;AACA,qBAAKC,gBAAL,GAAwBnB,mBAASoB,mCAAT,CACpB,IADoB,EACdR,OADc,EACL,KAAKN,cADA,CAAxB;AAGH,aALD,MAKO;AACH;AACA,qBAAKF,gBAAL;AACA,qBAAKC,qBAAL;AACH;AACJ;;;2CAEkB;AACf,gBAAI,KAAKC,cAAT,EAAyB;AACrBN,mCAASqB,sBAAT,CAAgC,KAAKf,cAArC;AACA,qBAAKa,gBAAL,GAAwB,IAAxB;AACH;AACJ;;;uCAEc;AACX,mBAAO,KAAKb,cAAZ;AACH;;;4CAEmB;AAChB,gBAAI,CAAC,KAAKgB,SAAL,EAAL,EAAuB;AACnB,sBAAM,IAAIC,KAAJ,CAAU,sEAAV,CAAN;AACH;;AAED,gBAAI,KAAKJ,gBAAT,EAA2B;AACvB,oBAAI,KAAKA,gBAAL,CAAsBK,iBAA1B,EAA6C;AACzC,2BAAO,KAAKL,gBAAL,CAAsBK,iBAAtB,EAAP;AACH,iBAFD,MAEO;AACH,2BAAOxB,mBAASC,WAAT,CAAqB,KAAKkB,gBAA1B,CAAP;AACH;AACJ;;AAED,mBAAO,IAAP;AACH;;;8CAEqB;AAClB,mBAAOtB,aAAa,KAAKgB,KAAL,CAAWf,SAAxB,EAAmCS,SAASkB,IAA5C,CAAP;AACH;;;;EAzF6BV,gBAAMW,S;;AAAnBxB,I,CACVyB,S,GAAY;AACf7B,eAAW8B,oBAAUC,SAAV,CAAoB,CAC3BD,oBAAUE,IADiB,EAE3BF,oBAAUG,IAFiB,EAG3BH,oBAAUI,OAHiB,EAI3BJ,oBAAUK,GAJiB,CAApB,CADI;AAOfnB,cAAUc,oBAAUE;AAPL,C;kBADF5B,I;;;AA4FrBA,KAAKgC,WAAL,GAAmB,MAAnB","file":"index.js","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nfunction getContainer(container, defaultContainer) {\n    container = typeof container === 'function' ? container() : container;\n    return ReactDOM.findDOMNode(container) || defaultContainer;\n}\n\nexport default class Pipe extends React.Component {\n    static propTypes = {\n        container: PropTypes.oneOfType([\n            PropTypes.node,\n            PropTypes.func,\n            PropTypes.element,\n            PropTypes.any\n        ]),\n        children: PropTypes.node\n    }\n\n    componentDidMount() {\n        this._renderOverlay();\n    }\n\n    componentDidUpdate() {\n        this._renderOverlay();\n    }\n\n    componentWillUnmount() {\n        this._unrenderOverlay();\n        this._unmountOverlayTarget();\n    }\n\n    render() {\n        return null;\n    }\n\n    _mountOverlayTarget() {\n        if (!this._overlayTarget) {\n            this._overlayTarget = document.createElement('div');\n            this.getContainerDOMNode()\n                .appendChild(this._overlayTarget);\n        }\n    }\n\n    _unmountOverlayTarget() {\n        if (this._overlayTarget) {\n            this.getContainerDOMNode()\n                .removeChild(this._overlayTarget);\n            this._overlayTarget = null;\n        }\n    }\n\n    _renderOverlay() {\n        let overlay = !this.props.children ? null : React.Children.only(this.props.children);\n\n        // Save reference for future access.\n        if (overlay !== null) {\n            this._mountOverlayTarget();\n            this._overlayInstance = ReactDOM.unstable_renderSubtreeIntoContainer(\n                this, overlay, this._overlayTarget\n            );\n        } else {\n            // Unrender if the component is null for transitions to null\n            this._unrenderOverlay();\n            this._unmountOverlayTarget();\n        }\n    }\n\n    _unrenderOverlay() {\n        if (this._overlayTarget) {\n            ReactDOM.unmountComponentAtNode(this._overlayTarget);\n            this._overlayInstance = null;\n        }\n    }\n\n    getMountNode() {\n        return this._overlayTarget;\n    }\n\n    getOverlayDOMNode() {\n        if (!this.isMounted()) {\n            throw new Error('getOverlayDOMNode(): A component must be mounted to have a DOM node.');\n        }\n\n        if (this._overlayInstance) {\n            if (this._overlayInstance.getWrappedDOMNode) {\n                return this._overlayInstance.getWrappedDOMNode();\n            } else {\n                return ReactDOM.findDOMNode(this._overlayInstance);\n            }\n        }\n\n        return null;\n    }\n\n    getContainerDOMNode() {\n        return getContainer(this.props.container, document.body);\n    }\n}\n\nPipe.displayName = 'Pipe';\n"]}