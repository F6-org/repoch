{"version":3,"sources":["../../src/toast/index.js"],"names":["Toast","handleTouch","e","preventDefault","stopPropagation","nativeEvent","stopImmediatePropagation","nextProps","nextState","props","show","text","timer","clearTimeout","autoHideDuration","afterClose","setTimeout","params","slice","call","arguments","data","types","_type","toString","split","toLowerCase","length","some","type","indexOf","className","icon","bgColor","getData","renderToast","background","checkType","Component"],"mappings":"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","file":"index.js","sourcesContent":["/*\n * @param{\n * show: bool\n * text: string或dom皆可\n * icon:'info/success/error/loading'\n * autoHideDuration:INT \n * afterClose: ()=>{}\n */\nimport './style.scss';\nimport React, {Component} from 'react';\n// import classNames from 'classnames';\n\nclass Toast extends Component {\n    shouldComponentUpdate(nextProps, nextState){\n        return this.props.show != nextProps.show || this.props.text != nextProps.text\n    }\n\n    componentWillUnmount(){\n        this.timer && clearTimeout(this.timer)\n        this.timer = null\n    }\n\n    componentDidUpdate(){\n        let {autoHideDuration = 3000, afterClose, show} = this.props;\n        if(show){\n            this.timer = setTimeout(() => {\n                this.timer && clearTimeout(this.timer)\n                this.timer = null\n\n                afterClose && afterClose();\n            }, autoHideDuration);\n        }\n   \n    }\n\n    checkType() {\n        var params = [].slice.call(arguments);\n        var data = params[0];\n        var types = params.slice(1);\n        var _type = {}.toString.call(data).split(/\\s|\\]|\\[/)[2].toLowerCase();\n        return types.length ? types.some(function (type) {\n            return _type.indexOf(type.toLowerCase());\n        }) > -1 : _type;\n    }\n\n    handleTouch = e => {\n        \n        e.preventDefault();\n        e.stopPropagation();\n        e.nativeEvent.stopImmediatePropagation();\n        e.nativeEvent.preventDefault();\n        return false;\n    }\n\n    renderToast(){\n        const props = this.props;\n        const {className = \"\", icon = 'info', text, bgColor = 'rgba(51,51,51,.8)'} = props;\n       \n        return (\n           \n            <div className={`c-toast-root ${className}`} style={this.getData('rootStyle')(bgColor)}>\n                <div className=\"icon\">{this.getData('icon')(icon)}</div>\n                <div className=\"text\">{text}</div>\n            </div>\n           \n        );\n    }\n\n    render() {\n        const {show, className = \"\"}= this.props;\n        return (\n                <div className={`c-toast-wrapper ${className} ${show? \"in\": \"out\"}`}\n                    onTouchMove={e => this.handleTouch(e)}\n                    onTouchEnd={e => this.handleTouch(e)}\n                >\n                    {\n                        this.renderToast()\n                    }\n                </div>\n        )\n    }\n\n    getData(type) {\n        return {\n            'rootStyle': (bgColor) => ({\n                background: bgColor\n            }),\n            'icon': icon => {\n                if(!this.checkType(icon, 'string')){\n                    return icon;\n                }\n                return {\n                    'info': <i className=\"i-icon icon-info-circle\"/>,\n                    'success': <i className=\"i-icon icon-check-circle\"/>,\n                    'error': <i className=\"i-icon icon-error-circle\"/>,\n                    'loading': <i className=\"i-icon icon-loading\"/>,\n                }[icon]\n            }\n        }[type]\n    }\n}\n\nexport default Toast;"]}