{"version":3,"sources":["../../src/weibo-jsbridge/open-image.js"],"names":["opts","urls","onSuccess","onFail","bridgeReady","pts","window","WeiboJSBridge","invoke","url","params","success","code","document"],"mappings":";;;;;;kQAAA;;;;;;;;;;;;;;;;;;;;;kBAqBe,UAASA,IAAT,EAAe;AAC1BA,WAAO,SAAc;AACjBC,cAAK,EADY;AAEjBC,mBAAW,qBAAW,CAAE,CAFP;AAGjBC,gBAAQ,kBAAW,CAAE;AAHJ,KAAd,EAIJH,IAJI,CAAP;;AAMA,QAAII,cAAc,SAAdA,WAAc,GAAW;AACzB,YAAI,OAAOC,IAAIJ,IAAX,KAAoB,QAAxB,EACID,KAAKC,IAAL,GAAY,CAACD,KAAKC,IAAN,CAAZ;;AAEJK,eAAOC,aAAP,CAAqBC,MAArB,CAA4B,WAA5B,EAAyC,EAACC,KAAIT,KAAKC,IAAL,CAAU,CAAV,CAAL,EAAmBA,MAAMD,KAAKC,IAA9B,EAAzC,EAA8E,UAASS,MAAT,EAAiBC,OAAjB,EAA0BC,IAA1B,EAAgC;AAC1G,gBAAID,OAAJ,EAAa;AACTX,qBAAKE,SAAL,CAAeQ,MAAf;AACH,aAFD,MAEO;AACHV,qBAAKG,MAAL,CAAYS,IAAZ;AACH;AACJ,SAND;AAOH,KAXD;;AAaA,QAAI,CAACN,OAAOC,aAAZ,EAA2B;AACvBP,aAAKG,MAAL,CAAY,GAAZ;AACA,0BAAiBU,QAAjB,EAA2B,oBAA3B,EAAiDT,WAAjD;AACA;AACH;;AAEDA;AACH,C;;AA7BD","file":"open-image.js","sourcesContent":["/**\n * 查看大图\n * @param {Object} opts\n * @param {String|Array} opts.urls 需要查看的图片地址,数组第一个元素第一个展示\n * @param {Function} opts.onSuccess 执行成功回调\n * @param {Function} opts.onFail 执行失败回调\n * @weibo >=4.3.0\n * @Auther MrGalaxyn\n * 错误码\n    代码        Status Code           含义\n    200         OK                  操作成功\n    400         MISSING_PARAMS      缺少必须的参数\n    403         ILLEGAL_ACCESS      非法调用\n    500         INTERNAL_ERROR      客户端内部处理错误\n    501         ACTION_NOT_FOUND    客户端未实现此 action\n    550         NO_RESULT           客户端没有获取到结果\n    550         USER_CANCELLED      用户取消了操作\n    553         SERVICE_FORBIDDEN   相关服务未启用或被禁止 (如定位服务，相册权限)\n */\nimport addEventListener from 'dom-helpers/events/on';\n\nexport default function(opts) {\n    opts = Object.assign({\n        urls:'',\n        onSuccess: function() {},\n        onFail: function() {}\n    }, opts);\n\n    var bridgeReady = function() {\n        if (typeof pts.urls === 'string')\n            opts.urls = [opts.urls];\n\n        window.WeiboJSBridge.invoke(\"openImage\", {url:opts.urls[0], urls: opts.urls}, function(params, success, code) {\n            if (success) {\n                opts.onSuccess(params);\n            } else {\n                opts.onFail(code);\n            }\n        });\n    }\n    \n    if (!window.WeiboJSBridge) {\n        opts.onFail(550);\n        addEventListener(document, 'WeiboJSBridgeReady', bridgeReady);\n        return;\n    }\n\n    bridgeReady();\n}\n"]}