{"version":3,"sources":["../../src/weibo-jsbridge/open-menu.js"],"names":["opts","onSuccess","onFail","bridgeReady","window","WeiboJSBridge","invoke","params","success","code","document"],"mappings":";;;;;;kQAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBA2Ce,UAASA,IAAT,EAAe;AAC1BA,WAAO,SAAc;AACjBC,mBAAW,qBAAW,CAAE,CADP;AAEjBC,gBAAQ,kBAAW,CAAE;AAFJ,KAAd,EAGJF,IAHI,CAAP;;AAKA,QAAIG,cAAc,SAAdA,WAAc,GAAW;AACzBC,eAAOC,aAAP,CAAqBC,MAArB,CAA4B,UAA5B,EAAwC,IAAxC,EAA8C,UAASC,MAAT,EAAiBC,OAAjB,EAA0BC,IAA1B,EAAgC;AAC1E,gBAAID,OAAJ,EACIR,KAAKC,SAAL,CAAeM,MAAf,EADJ,KAGIP,KAAKE,MAAL,CAAYO,IAAZ;AACP,SALD;AAMH,KAPD;;AASA,QAAI,CAACL,OAAOC,aAAZ,EAA2B;AACvBL,aAAKE,MAAL,CAAY,GAAZ;AACA,0BAAiBQ,QAAjB,EAA2B,oBAA3B,EAAiDP,WAAjD;AACA;AACH;;AAEDA;AACH,C;;AAxBD","file":"open-menu.js","sourcesContent":["/**\n * 打开内置浏览器菜单\n * @param {Object} opts\n * @param {Function} opts.onSuccess 执行成功回调\n * @param {Function} opts.onFail 执行失败回调\n * @return {Object}\n    {\n        selected_code: 用户选择的按钮所对应的编码\n        selected_title: 用户选择的按钮标题\n    }\n * 按钮码\n    标题          编码\n    微博          1001\n    好友圈        1002\n    私信          1003\n    微信好友      1004\n    朋友圈        1005\n    微米好友      1006\n    微米圈        1007\n    来往好友      1008\n    来往动态      1009\n    QQ            1010\n    Qzone         1011\n    短信          1101\n    邮件          1102\n    系统浏览器    2001\n    复制链接      2002\n    字号设置      2003\n* 错误码\n    代码        Status Code           含义\n    200         OK                  操作成功\n    400         MISSING_PARAMS      缺少必须的参数\n    403         ILLEGAL_ACCESS      非法调用\n    500         INTERNAL_ERROR      客户端内部处理错误\n    501         ACTION_NOT_FOUND    客户端未实现此 action\n    550         NO_RESULT           客户端没有获取到结果\n    550         USER_CANCELLED      用户取消了操作\n    553         SERVICE_FORBIDDEN   相关服务未启用或被禁止 (如定位服务，相册权限)\n * @weibo >=5.0.0\n * @Auther MrGalaxyn\n */\nimport addEventListener from 'dom-helpers/events/on';\n\nexport default function(opts) {\n    opts = Object.assign({\n        onSuccess: function() {},\n        onFail: function() {}\n    }, opts);\n\n    var bridgeReady = function() {\n        window.WeiboJSBridge.invoke(\"openMenu\", null, function(params, success, code) {\n            if (success)\n                opts.onSuccess(params);\n            else\n                opts.onFail(code);\n        });\n    }\n\n    if (!window.WeiboJSBridge) {\n        opts.onFail(550);\n        addEventListener(document, 'WeiboJSBridgeReady', bridgeReady);\n        return;\n    }\n\n    bridgeReady();\n}\n"]}