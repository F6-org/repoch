{"version":3,"sources":["../../src/format/query-to-json.js"],"names":["qs","sep","eq","options","obj","length","regexp","split","maxKeys","len","i","x","replace","idx","indexOf","kstr","vstr","k","v","substr","decodeURIComponent","hasOwnProperty","Array","isArray","push","prop","Object","prototype","call"],"mappings":"AAAA;AACA;;AAEA;AACA;AACA;;;;;;kBAMe,UAASA,EAAT,EAAaC,GAAb,EAAkBC,EAAlB,EAAsBC,OAAtB,EAA+B;AAC1CF,UAAMA,OAAO,GAAb;AACAC,SAAKA,MAAM,GAAX;AACA,QAAIE,MAAM,EAAV;;AAEA,QAAI,OAAOJ,EAAP,KAAc,QAAd,IAA0BA,GAAGK,MAAH,KAAc,CAA5C,EAA+C;AAC3C,eAAOD,GAAP;AACH;;AAED,QAAIE,SAAS,KAAb;AACAN,SAAKA,GAAGO,KAAH,CAASN,GAAT,CAAL;;AAEA,QAAIO,UAAU,IAAd;AACA,QAAIL,WAAW,OAAOA,QAAQK,OAAf,KAA2B,QAA1C,EAAoD;AAChDA,kBAAUL,QAAQK,OAAlB;AACH;;AAED,QAAIC,MAAMT,GAAGK,MAAb;AACA;AACA,QAAIG,UAAU,CAAV,IAAeC,MAAMD,OAAzB,EAAkC;AAC9BC,cAAMD,OAAN;AACH;;AAED,SAAK,IAAIE,IAAI,CAAb,EAAgBA,IAAID,GAApB,EAAyB,EAAEC,CAA3B,EAA8B;AAC1B,YAAIC,IAAIX,GAAGU,CAAH,EAAME,OAAN,CAAcN,MAAd,EAAsB,KAAtB,CAAR;AAAA,YACIO,MAAMF,EAAEG,OAAF,CAAUZ,EAAV,CADV;AAAA,YAEIa,IAFJ;AAAA,YAEUC,IAFV;AAAA,YAEgBC,CAFhB;AAAA,YAEmBC,CAFnB;;AAIA,YAAIL,OAAO,CAAX,EAAc;AACVE,mBAAOJ,EAAEQ,MAAF,CAAS,CAAT,EAAYN,GAAZ,CAAP;AACAG,mBAAOL,EAAEQ,MAAF,CAASN,MAAM,CAAf,CAAP;AACH,SAHD,MAGO;AACHE,mBAAOJ,CAAP;AACAK,mBAAO,EAAP;AACH;;AAEDC,YAAIG,mBAAmBL,IAAnB,CAAJ;AACAG,YAAIE,mBAAmBJ,IAAnB,CAAJ;;AAEA,YAAI,CAACK,eAAejB,GAAf,EAAoBa,CAApB,CAAL,EAA6B;AACzBb,gBAAIa,CAAJ,IAASC,CAAT;AACH,SAFD,MAEO,IAAII,MAAMC,OAAN,CAAcnB,IAAIa,CAAJ,CAAd,CAAJ,EAA2B;AAC9Bb,gBAAIa,CAAJ,EAAOO,IAAP,CAAYN,CAAZ;AACH,SAFM,MAEA;AACHd,gBAAIa,CAAJ,IAAS,CAACb,IAAIa,CAAJ,CAAD,EAASC,CAAT,CAAT;AACH;AACJ;;AAED,WAAOd,GAAP;AACH,C;;AAtDD,SAASiB,cAAT,CAAwBjB,GAAxB,EAA6BqB,IAA7B,EAAmC;AAC/B,WAAOC,OAAOC,SAAP,CAAiBN,cAAjB,CAAgCO,IAAhC,CAAqCxB,GAArC,EAA0CqB,IAA1C,CAAP;AACH;;AAED;AAkDC","file":"query-to-json.js","sourcesContent":["/* global module: false */\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n    return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n/* eslint-disable */\nexport default function(qs, sep, eq, options) {\n    sep = sep || '&';\n    eq = eq || '=';\n    var obj = {};\n\n    if (typeof qs !== 'string' || qs.length === 0) {\n        return obj;\n    }\n\n    var regexp = /\\+/g;\n    qs = qs.split(sep);\n\n    var maxKeys = 1000;\n    if (options && typeof options.maxKeys === 'number') {\n        maxKeys = options.maxKeys;\n    }\n\n    var len = qs.length;\n    // maxKeys <= 0 means that we should not limit keys count\n    if (maxKeys > 0 && len > maxKeys) {\n        len = maxKeys;\n    }\n\n    for (var i = 0; i < len; ++i) {\n        var x = qs[i].replace(regexp, '%20'),\n            idx = x.indexOf(eq),\n            kstr, vstr, k, v;\n\n        if (idx >= 0) {\n            kstr = x.substr(0, idx);\n            vstr = x.substr(idx + 1);\n        } else {\n            kstr = x;\n            vstr = '';\n        }\n\n        k = decodeURIComponent(kstr);\n        v = decodeURIComponent(vstr);\n\n        if (!hasOwnProperty(obj, k)) {\n            obj[k] = v;\n        } else if (Array.isArray(obj[k])) {\n            obj[k].push(v);\n        } else {\n            obj[k] = [obj[k], v];\n        }\n    }\n\n    return obj;\n};\n"]}